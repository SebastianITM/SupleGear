"""
ESTRUCTURA VISUAL DE SUPLEGEAR BACKEND
======================================

Esta es una referencia rÃ¡pida de la estructura del proyecto.
Para detalles completos, ver README.md

â”Œâ”€ CLEAN ARCHITECTURE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  API LAYER (endpoints)                                     â”‚
â”‚  â†“                                                         â”‚
â”‚  APPLICATION LAYER (use cases)                             â”‚
â”‚  â†“                                                         â”‚
â”‚  DOMAIN LAYER (entities & business rules)                  â”‚
â”‚  â†“                                                         â”‚
â”‚  INFRASTRUCTURE LAYER (db, repositories, services)         â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

backend/
â”‚
â”œâ”€â”€ ğŸ“ app/                          [APLICACIÃ“N PRINCIPAL]
â”‚   â”œâ”€â”€ main.py                      Factory FastAPI
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ core/                     [CONFIGURACIÃ“N GLOBAL]
â”‚   â”‚   â”œâ”€â”€ config.py                Settings (env vars)
â”‚   â”‚   â”œâ”€â”€ security.py              JWT, passwords
â”‚   â”‚   â””â”€â”€ constants.py             Enums y constantes
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ domain/                   [LÃ“GICA DE NEGOCIO PURA]
â”‚   â”‚   â”œâ”€â”€ ğŸ“ users/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ products/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ categories/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ orders/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ coupons/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ payments/
â”‚   â”‚   â””â”€â”€ ğŸ“ roles/
â”‚   â”‚   â””â”€â”€ [entities.py]            Reglas de negocio
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ application/              [CASOS DE USO]
â”‚   â”‚   â”œâ”€â”€ ğŸ“ users/                CreateUserUseCase, etc
â”‚   â”‚   â”œâ”€â”€ ğŸ“ products/             CreateProductUseCase, etc
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/                 LoginUseCase, RefreshTokenUseCase
â”‚   â”‚   â”œâ”€â”€ ğŸ“ categories/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ orders/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ coupons/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ payments/
â”‚   â”‚   â””â”€â”€ ğŸ“ roles/
â”‚   â”‚   â””â”€â”€ [*_use_case.py]          OrquestaciÃ³n de lÃ³gica
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ infrastructure/           [IMPLEMENTACIÃ“N TÃ‰CNICA]
â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py          Engine, SessionLocal, Base
â”‚   â”‚   â”‚   â”œâ”€â”€ models_user.py       ORM User
â”‚   â”‚   â”‚   â”œâ”€â”€ models_product.py    ORM Product
â”‚   â”‚   â”‚   â”œâ”€â”€ models_order.py      ORM Order, Payment
â”‚   â”‚   â”‚   â””â”€â”€ models_coupon.py     ORM Coupon
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ repositories/         [PATRÃ“N REPOSITORY]
â”‚   â”‚   â”‚   â”œâ”€â”€ base_repository.py   CRUD genÃ©rico
â”‚   â”‚   â”‚   â”œâ”€â”€ user_repository.py   get_by_email(), search()
â”‚   â”‚   â”‚   â”œâ”€â”€ product_repository.py get_by_sku(), search()
â”‚   â”‚   â”‚   â”œâ”€â”€ order_repository.py   get_by_user()
â”‚   â”‚   â”‚   â””â”€â”€ coupon_repository.py  validate_coupon()
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ email_service.py      EnvÃ­o de emails
â”‚   â”‚   â”‚   â”œâ”€â”€ sms_service.py        EnvÃ­o de SMS
â”‚   â”‚   â”‚   â””â”€â”€ notification_service.py Notificaciones
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ external/
â”‚   â”‚       â”œâ”€â”€ stripe_service.py     IntegraciÃ³n Stripe
â”‚   â”‚       â”œâ”€â”€ paypal_service.py     IntegraciÃ³n PayPal
â”‚   â”‚       â””â”€â”€ twilio_service.py     IntegraciÃ³n Twilio
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ api/                      [CAPA HTTP]
â”‚   â”‚   â””â”€â”€ ğŸ“ v1/
â”‚   â”‚       â”œâ”€â”€ router.py            Router principal v1
â”‚   â”‚       â”œâ”€â”€ dependencies.py       JWT, roles (get_current_user)
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ ğŸ“ endpoints/        [RUTAS HTTP]
â”‚   â”‚           â”œâ”€â”€ auth.py          POST /auth/login
â”‚   â”‚           â”œâ”€â”€ users.py         CRUD /users
â”‚   â”‚           â”œâ”€â”€ products.py      CRUD /products
â”‚   â”‚           â”œâ”€â”€ categories.py    CRUD /categories
â”‚   â”‚           â”œâ”€â”€ orders.py        CRUD /orders
â”‚   â”‚           â”œâ”€â”€ coupons.py       CRUD /coupons
â”‚   â”‚           â””â”€â”€ payments.py      CRUD /payments
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ schemas/                  [DTOs / PYDANTIC]
â”‚   â”‚   â”œâ”€â”€ user_schemas.py          UserCreate, UserResponse
â”‚   â”‚   â”œâ”€â”€ product_schemas.py       ProductCreate, ProductResponse
â”‚   â”‚   â”œâ”€â”€ auth_schemas.py          TokenRequest, TokenResponse
â”‚   â”‚   â””â”€â”€ common_schemas.py        Schemas compartidos
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ utils/                    [UTILIDADES]
â”‚       â”œâ”€â”€ helpers.py               Funciones auxiliares
â”‚       â”œâ”€â”€ exceptions.py            Excepciones personalizadas
â”‚       â””â”€â”€ validators.py            Validadores comunes
â”‚
â”œâ”€â”€ ğŸ“ tests/                        [PRUEBAS]
â”‚   â”œâ”€â”€ ğŸ“ unit/
â”‚   â”‚   â”œâ”€â”€ test_products.py
â”‚   â”‚   â”œâ”€â”€ test_users.py
â”‚   â”‚   â””â”€â”€ test_auth.py
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ integration/
â”‚       â”œâ”€â”€ test_product_flow.py
â”‚       â””â”€â”€ test_order_flow.py
â”‚
â”œâ”€â”€ ğŸ“„ main.py                       PUNTO DE ENTRADA
â”œâ”€â”€ ğŸ“„ requirements.txt              Dependencias Python
â”œâ”€â”€ ğŸ“„ Dockerfile                    ContenedorizaciÃ³n
â”œâ”€â”€ ğŸ“„ docker-compose.yml            OrquestaciÃ³n servicios
â”œâ”€â”€ ğŸ“„ .env.example                  Variables de entorno (plantilla)
â”œâ”€â”€ ğŸ“„ .env                          Variables (âš ï¸ NO en git)
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ conftest.py                   Config pytest
â”œâ”€â”€ ğŸ“„ pyproject.toml                Config Black
â””â”€â”€ ğŸ“„ README.md                     DOCUMENTACIÃ“N

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Œ REGLAS DE ARQUITECTURA:

1. API LAYER NO puede importar directamente de INFRASTRUCTURE
   âœ… API â†’ APPLICATION â†’ INFRASTRUCTURE
   âŒ API â†’ INFRASTRUCTURE

2. DOMAIN debe ser independiente de todo
   âœ… DOMAIN = LÃ³gica pura sin dependencias externas
   âŒ DOMAIN no puede importar de INFRASTRUCTURE

3. APPLICATION orquesta entre DOMAIN e INFRASTRUCTURE
   âœ… USE CASES = Logica + Repositories
   âŒ USE CASES no implementan detalles DB

4. INFRASTRUCTURE abstrae detalles tÃ©cnicos
   âœ… Repository pattern, queries SQL ocultas
   âŒ SQL raw en endpoints

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š FLUJO DE PETICIÃ“N EJEMPLO (POST /products):

Cliente HTTP
    â†“
FastAPI Router (api/v1/endpoints/products.py)
    â”œâ”€ ValidaciÃ³n JWT (dependencies.get_current_vendor)
    â”œâ”€ ValidaciÃ³n schema Pydantic (ProductCreate)
    â†“
CreateProductUseCase (application/products/)
    â”œâ”€ LÃ³gica de negocio
    â”œâ”€ Validaciones complejas
    â”œâ”€ OrquestaciÃ³n
    â†“
ProductRepository (infrastructure/repositories/)
    â”œâ”€ Queries SQL
    â”œâ”€ Manejo BD
    â†“
SQLAlchemy ORM (Product model)
    â†“
PostgreSQL Database
    â†“ (Retornar)
ProductResponse (schema Pydantic)
    â†“
Cliente HTTP (JSON)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”‘ MÃ“DULOS DEL E-COMMERCE:

â”Œâ”€ USUARIOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ domain/users/entities.py       â”‚
â”‚ application/users/*.py         â”‚
â”‚ infrastructure/repositories/   â”‚
â”‚ /user_repository.py           â”‚
â”‚ api/v1/endpoints/users.py     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ AUTENTICACIÃ“N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ application/auth/login.py      â”‚
â”‚ core/security.py (JWT)        â”‚
â”‚ api/v1/dependencies.py         â”‚
â”‚ api/v1/endpoints/auth.py      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ PRODUCTOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ domain/products/entities.py    â”‚
â”‚ application/products/*.py      â”‚
â”‚ infrastructure/repositories/   â”‚
â”‚ /product_repository.py        â”‚
â”‚ api/v1/endpoints/products.py  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Ã“RDENES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ domain/orders/entities.py      â”‚
â”‚ application/orders/*.py        â”‚
â”‚ infrastructure/repositories/   â”‚
â”‚ /order_repository.py          â”‚
â”‚ api/v1/endpoints/orders.py    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Similar para: CATEGORÃAS, CUPONES, PAGOS, ROLES]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ¨ CARACTERÃSTICAS:

âœ… Clean Architecture (4 capas bien definidas)
âœ… SOLID Principles
âœ… Repository Pattern
âœ… inyecciÃ³n de Dependencias
âœ… JWT Authentication
âœ… Role-Based Access Control (RBAC)
âœ… Pydantic v2 Validation
âœ… Swagger Documentation
âœ… Docker Support
âœ… PostgreSQL + SQLAlchemy ORM
âœ… Custom Exceptions
âœ… Logging
âœ… Unit & Integration Tests
âœ… Versioning (API v1)
âœ… Soft Delete Support
âœ… Audit Trails (created_at, updated_at)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸš€ PARA EMPEZAR:

1. cd backend
2. pip install -r requirements.txt
3. cp .env.example .env
4. python main.py
5. Visitar: http://localhost:8000/api/v1/docs

ğŸ³ O CON DOCKER:

1. docker-compose up -d
2. Visitar: http://localhost:8000/api/v1/docs

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“š VER TAMBIÃ‰N:

README.md - DocumentaciÃ³n completa
app/main.py - Factory FastAPI
app/core/config.py - ConfiguraciÃ³n
app/infrastructure/repositories/base_repository.py - CRUD base
"""
